import { Vector3, Color } from 'three';
import { BezierPatchObject } from '../objects/bezierPatchObject.js';
import { App } from './app.js';

function getPerspectiveCameraPosition() {
    return [-5, 10, 5];
}
function getOrthographicCameraPosition() {
    return [0, 100, 0];
}
//https://flatuicolors.com/palette/defo
function getBackgroundColor() {
    return 0xecf0f1;
}
function getDarkBackgroundColor() {
    return 0x2f3030;
}
function getModeBackgroundColor() {
    return App.darkMode() ? getDarkBackgroundColor() : getBackgroundColor();
}
function getHighlightColor() {
    return 0xe67e22;
}
function getSelectedColor() {
    return 0xe74c3c;
}
function getEditHandleColor() {
    return App.darkMode() ? 0xacbfd1 : 0x34495e;
}
function getColorFromPalette(i) {
    const colors = [0x1abc9c, 0x2ecc71, 0x3498db, 0x9b59b6, 0x34495e, 0xf1c40f, 0xd35400, 0xe74c3c];
    return colors[i % colors.length];
}
function getNewPosition(a, b) {
    var result = new Vector3();
    result.set(a.x + (a.x - b.x), a.y - (a.y - b.y), a.z + (a.z - b.z));
    return result;
}
//TODO - manager to register new objects including icons...
function getIcon(type) {
    switch (type) {
        case 'LinearCurveObject': return { name: 'waypoints', lucide: true };
        case 'BezierCurveObject': return { name: 'bezier2', lucide: false };
        case 'BezierSplineObject': return { name: 'bezier', lucide: false };
        case 'UniformBSplineObject': return { name: 'spline', lucide: true };
        case 'UniformRationBSplineObject': return { name: 'diameter', lucide: true };
        case 'BezierPatchObject': return { name: 'grid-2x2', lucide: true };
        case 'UniformBSplineSurfaceObject': return { name: 'grid-3x3', lucide: true };
        case 'UniformRationalBSplineSurfaceObject': return { name: 'ratio', lucide: true };
        default: return { name: 'circle-help', lucide: true };
    }
}
const teapot = "32\n3 3\n1.4 0.0 2.4\n1.4 -0.784 2.4\n0.784 -1.4 2.4\n0.0 -1.4 2.4\n1.3375 0.0 2.53125\n1.3375 -0.749 2.53125\n0.749 -1.3375 2.53125\n0.0 -1.3375 2.53125\n1.4375 0.0 2.53125\n1.4375 -0.805 2.53125\n0.805 -1.4375 2.53125\n0.0 -1.4375 2.53125\n1.5 0.0 2.4\n1.5 -0.84 2.4\n0.84 -1.5 2.4\n0.0 -1.5 2.4\n3 3\n0.0 -1.4 2.4\n-0.784 -1.4 2.4\n-1.4 -0.784 2.4\n-1.4 0.0 2.4\n0.0 -1.3375 2.53125\n-0.749 -1.3375 2.53125\n-1.3375 -0.749 2.53125\n-1.3375 0.0 2.53125\n0.0 -1.4375 2.53125\n-0.805 -1.4375 2.53125\n-1.4375 -0.805 2.53125\n-1.4375 0.0 2.53125\n0.0 -1.5 2.4\n-0.84 -1.5 2.4\n-1.5 -0.84 2.4\n-1.5 0.0 2.4\n3 3\n-1.4 0.0 2.4\n-1.4 0.784 2.4\n-0.784 1.4 2.4\n0.0 1.4 2.4\n-1.3375 0.0 2.53125\n-1.3375 0.749 2.53125\n-0.749 1.3375 2.53125\n0.0 1.3375 2.53125\n-1.4375 0.0 2.53125\n-1.4375 0.805 2.53125\n-0.805 1.4375 2.53125\n0.0 1.4375 2.53125\n-1.5 0.0 2.4\n-1.5 0.84 2.4\n-0.84 1.5 2.4\n0.0 1.5 2.4\n3 3\n0.0 1.4 2.4\n0.784 1.4 2.4\n1.4 0.784 2.4\n1.4 0.0 2.4\n0.0 1.3375 2.53125\n0.749 1.3375 2.53125\n1.3375 0.749 2.53125\n1.3375 0.0 2.53125\n0.0 1.4375 2.53125\n0.805 1.4375 2.53125\n1.4375 0.805 2.53125\n1.4375 0.0 2.53125\n0.0 1.5 2.4\n0.84 1.5 2.4\n1.5 0.84 2.4\n1.5 0.0 2.4\n3 3\n1.5 0.0 2.4\n1.5 -0.84 2.4\n0.84 -1.5 2.4\n0.0 -1.5 2.4\n1.75 0.0 1.875\n1.75 -0.98 1.875\n0.98 -1.75 1.875\n0.0 -1.75 1.875\n2.0 0.0 1.35\n2.0 -1.12 1.35\n1.12 -2.0 1.35\n0.0 -2.0 1.35\n2.0 0.0 0.9\n2.0 -1.12 0.9\n1.12 -2.0 0.9\n0.0 -2.0 0.9\n3 3\n0.0 -1.5 2.4\n-0.84 -1.5 2.4\n-1.5 -0.84 2.4\n-1.5 0.0 2.4\n0.0 -1.75 1.875\n-0.98 -1.75 1.875\n-1.75 -0.98 1.875\n-1.75 0.0 1.875\n0.0 -2.0 1.35\n-1.12 -2.0 1.35\n-2.0 -1.12 1.35\n-2.0 0.0 1.35\n0.0 -2.0 0.9\n-1.12 -2.0 0.9\n-2.0 -1.12 0.9\n-2.0 0.0 0.9\n3 3\n-1.5 0.0 2.4\n-1.5 0.84 2.4\n-0.84 1.5 2.4\n0.0 1.5 2.4\n-1.75 0.0 1.875\n-1.75 0.98 1.875\n-0.98 1.75 1.875\n0.0 1.75 1.875\n-2.0 0.0 1.35\n-2.0 1.12 1.35\n-1.12 2.0 1.35\n0.0 2.0 1.35\n-2.0 0.0 0.9\n-2.0 1.12 0.9\n-1.12 2.0 0.9\n0.0 2.0 0.9\n3 3\n0.0 1.5 2.4\n0.84 1.5 2.4\n1.5 0.84 2.4\n1.5 0.0 2.4\n0.0 1.75 1.875\n0.98 1.75 1.875\n1.75 0.98 1.875\n1.75 0.0 1.875\n0.0 2.0 1.35\n1.12 2.0 1.35\n2.0 1.12 1.35\n2.0 0.0 1.35\n0.0 2.0 0.9\n1.12 2.0 0.9\n2.0 1.12 0.9\n2.0 0.0 0.9\n3 3\n2.0 0.0 0.9\n2.0 -1.12 0.9\n1.12 -2.0 0.9\n0.0 -2.0 0.9\n2.0 0.0 0.45\n2.0 -1.12 0.45\n1.12 -2.0 0.45\n0.0 -2.0 0.45\n1.5 0.0 0.225\n1.5 -0.84 0.225\n0.84 -1.5 0.225\n0.0 -1.5 0.225\n1.5 0.0 0.15\n1.5 -0.84 0.15\n0.84 -1.5 0.15\n0.0 -1.5 0.15\n3 3\n0.0 -2.0 0.9\n-1.12 -2.0 0.9\n-2.0 -1.12 0.9\n-2.0 0.0 0.9\n0.0 -2.0 0.45\n-1.12 -2.0 0.45\n-2.0 -1.12 0.45\n-2.0 0.0 0.45\n0.0 -1.5 0.225\n-0.84 -1.5 0.225\n-1.5 -0.84 0.225\n-1.5 0.0 0.225\n0.0 -1.5 0.15\n-0.84 -1.5 0.15\n-1.5 -0.84 0.15\n-1.5 0.0 0.15\n3 3\n-2.0 0.0 0.9\n-2.0 1.12 0.9\n-1.12 2.0 0.9\n0.0 2.0 0.9\n-2.0 0.0 0.45\n-2.0 1.12 0.45\n-1.12 2.0 0.45\n0.0 2.0 0.45\n-1.5 0.0 0.225\n-1.5 0.84 0.225\n-0.84 1.5 0.225\n0.0 1.5 0.225\n-1.5 0.0 0.15\n-1.5 0.84 0.15\n-0.84 1.5 0.15\n0.0 1.5 0.15\n3 3\n0.0 2.0 0.9\n1.12 2.0 0.9\n2.0 1.12 0.9\n2.0 0.0 0.9\n0.0 2.0 0.45\n1.12 2.0 0.45\n2.0 1.12 0.45\n2.0 0.0 0.45\n0.0 1.5 0.225\n0.84 1.5 0.225\n1.5 0.84 0.225\n1.5 0.0 0.225\n0.0 1.5 0.15\n0.84 1.5 0.15\n1.5 0.84 0.15\n1.5 0.0 0.15\n3 3\n-1.6 0.0 2.025\n-1.6 -0.3 2.025\n-1.5 -0.3 2.25\n-1.5 0.0 2.25\n-2.3 0.0 2.025\n-2.3 -0.3 2.025\n-2.5 -0.3 2.25\n-2.5 0.0 2.25\n-2.7 0.0 2.025\n-2.7 -0.3 2.025\n-3.0 -0.3 2.25\n-3.0 0.0 2.25\n-2.7 0.0 1.8\n-2.7 -0.3 1.8\n-3.0 -0.3 1.8\n-3.0 0.0 1.8\n3 3\n-1.5 0.0 2.25\n-1.5 0.3 2.25\n-1.6 0.3 2.025\n-1.6 0.0 2.025\n-2.5 0.0 2.25\n-2.5 0.3 2.25\n-2.3 0.3 2.025\n-2.3 0.0 2.025\n-3.0 0.0 2.25\n-3.0 0.3 2.25\n-2.7 0.3 2.025\n-2.7 0.0 2.025\n-3.0 0.0 1.8\n-3.0 0.3 1.8\n-2.7 0.3 1.8\n-2.7 0.0 1.8\n3 3\n-2.7 0.0 1.8\n-2.7 -0.3 1.8\n-3.0 -0.3 1.8\n-3.0 0.0 1.8\n-2.7 0.0 1.575\n-2.7 -0.3 1.575\n-3.0 -0.3 1.35\n-3.0 0.0 1.35\n-2.5 0.0 1.125\n-2.5 -0.3 1.125\n-2.65 -0.3 0.9375\n-2.65 0.0 0.9375\n-2.0 0.0 0.9\n-2.0 -0.3 0.9\n-1.9 -0.3 0.6\n-1.9 0.0 0.6\n3 3\n-3.0 0.0 1.8\n-3.0 0.3 1.8\n-2.7 0.3 1.8\n-2.7 0.0 1.8\n-3.0 0.0 1.35\n-3.0 0.3 1.35\n-2.7 0.3 1.575\n-2.7 0.0 1.575\n-2.65 0.0 0.9375\n-2.65 0.3 0.9375\n-2.5 0.3 1.125\n-2.5 0.0 1.125\n-1.9 0.0 0.6\n-1.9 0.3 0.6\n-2.0 0.3 0.9\n-2.0 0.0 0.9\n3 3\n1.7 0.0 1.425\n1.7 -0.66 1.425\n1.7 -0.66 0.6\n1.7 0.0 0.6\n2.6 0.0 1.425\n2.6 -0.66 1.425\n3.1 -0.66 0.825\n3.1 0.0 0.825\n2.3 0.0 2.1\n2.3 -0.25 2.1\n2.4 -0.25 2.025\n2.4 0.0 2.025\n2.7 0.0 2.4\n2.7 -0.25 2.4\n3.3 -0.25 2.4\n3.3 0.0 2.4\n3 3\n1.7 0.0 0.6\n1.7 0.66 0.6\n1.7 0.66 1.425\n1.7 0.0 1.425\n3.1 0.0 0.825\n3.1 0.66 0.825\n2.6 0.66 1.425\n2.6 0.0 1.425\n2.4 0.0 2.025\n2.4 0.25 2.025\n2.3 0.25 2.1\n2.3 0.0 2.1\n3.3 0.0 2.4\n3.3 0.25 2.4\n2.7 0.25 2.4\n2.7 0.0 2.4\n3 3\n2.7 0.0 2.4\n2.7 -0.25 2.4\n3.3 -0.25 2.4\n3.3 0.0 2.4\n2.8 0.0 2.475\n2.8 -0.25 2.475\n3.525 -0.25 2.49375\n3.525 0.0 2.49375\n2.9 0.0 2.475\n2.9 -0.15 2.475\n3.45 -0.15 2.5125\n3.45 0.0 2.5125\n2.8 0.0 2.4\n2.8 -0.15 2.4\n3.2 -0.15 2.4\n3.2 0.0 2.4\n3 3\n3.3 0.0 2.4\n3.3 0.25 2.4\n2.7 0.25 2.4\n2.7 0.0 2.4\n3.525 0.0 2.49375\n3.525 0.25 2.49375\n2.8 0.25 2.475\n2.8 0.0 2.475\n3.45 0.0 2.5125\n3.45 0.15 2.5125\n2.9 0.15 2.475\n2.9 0.0 2.475\n3.2 0.0 2.4\n3.2 0.15 2.4\n2.8 0.15 2.4\n2.8 0.0 2.4\n3 3\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.8 0.0 3.15\n0.8 -0.45 3.15\n0.45 -0.8 3.15\n0.0 -0.8 3.15\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.2 0.0 2.7\n0.2 -0.112 2.7\n0.112 -0.2 2.7\n0.0 -0.2 2.7\n3 3\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.0 -0.8 3.15\n-0.45 -0.8 3.15\n-0.8 -0.45 3.15\n-0.8 0.0 3.15\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.0 -0.2 2.7\n-0.112 -0.2 2.7\n-0.2 -0.112 2.7\n-0.2 0.0 2.7\n3 3\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.0 0.0 3.15\n-0.8 0.0 3.15\n-0.8 0.45 3.15\n-0.45 0.8 3.15\n0.0 0.8 3.15\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.0 0.0 2.85\n-0.2 0.0 2.7\n-0.2 0.112 2.7\n-0.112 0.2 2.7\n0.0 0.2 2.7\n3 3\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.0 0.0 3.15\n0.0 0.8 3.15\n0.45 0.8 3.15\n0.8 0.45 3.15\n0.8 0.0 3.15\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.0 0.0 2.85\n0.0 0.2 2.7\n0.112 0.2 2.7\n0.2 0.112 2.7\n0.2 0.0 2.7\n3 3\n0.2 0.0 2.7\n0.2 -0.112 2.7\n0.112 -0.2 2.7\n0.0 -0.2 2.7\n0.4 0.0 2.55\n0.4 -0.224 2.55\n0.224 -0.4 2.55\n0.0 -0.4 2.55\n1.3 0.0 2.55\n1.3 -0.728 2.55\n0.728 -1.3 2.55\n0.0 -1.3 2.55\n1.3 0.0 2.4\n1.3 -0.728 2.4\n0.728 -1.3 2.4\n0.0 -1.3 2.4\n3 3\n0.0 -0.2 2.7\n-0.112 -0.2 2.7\n-0.2 -0.112 2.7\n-0.2 0.0 2.7\n0.0 -0.4 2.55\n-0.224 -0.4 2.55\n-0.4 -0.224 2.55\n-0.4 0.0 2.55\n0.0 -1.3 2.55\n-0.728 -1.3 2.55\n-1.3 -0.728 2.55\n-1.3 0.0 2.55\n0.0 -1.3 2.4\n-0.728 -1.3 2.4\n-1.3 -0.728 2.4\n-1.3 0.0 2.4\n3 3\n-0.2 0.0 2.7\n-0.2 0.112 2.7\n-0.112 0.2 2.7\n0.0 0.2 2.7\n-0.4 0.0 2.55\n-0.4 0.224 2.55\n-0.224 0.4 2.55\n0.0 0.4 2.55\n-1.3 0.0 2.55\n-1.3 0.728 2.55\n-0.728 1.3 2.55\n0.0 1.3 2.55\n-1.3 0.0 2.4\n-1.3 0.728 2.4\n-0.728 1.3 2.4\n0.0 1.3 2.4\n3 3\n0.0 0.2 2.7\n0.112 0.2 2.7\n0.2 0.112 2.7\n0.2 0.0 2.7\n0.0 0.4 2.55\n0.224 0.4 2.55\n0.4 0.224 2.55\n0.4 0.0 2.55\n0.0 1.3 2.55\n0.728 1.3 2.55\n1.3 0.728 2.55\n1.3 0.0 2.55\n0.0 1.3 2.4\n0.728 1.3 2.4\n1.3 0.728 2.4\n1.3 0.0 2.4\n3 3\n0.0 0.0 0.0\n0.0 0.0 0.0\n0.0 0.0 0.0\n0.0 0.0 0.0\n1.425 0.0 0.0\n1.425 0.798 0.0\n0.798 1.425 0.0\n0.0 1.425 0.0\n1.5 0.0 0.075\n1.5 0.84 0.075\n0.84 1.5 0.075\n0.0 1.5 0.075\n1.5 0.0 0.15\n1.5 0.84 0.15\n0.84 1.5 0.15\n0.0 1.5 0.15\n3 3\n0.0 0.0 0.0\n0.0 0.0 0.0\n0.0 0.0 0.0\n0.0 0.0 0.0\n0.0 1.425 0.0\n-0.798 1.425 0.0\n-1.425 0.798 0.0\n-1.425 0.0 0.0\n0.0 1.5 0.075\n-0.84 1.5 0.075\n-1.5 0.84 0.075\n-1.5 0.0 0.075\n0.0 1.5 0.15\n-0.84 1.5 0.15\n-1.5 0.84 0.15\n-1.5 0.0 0.15\n3 3\n0.0 0.0 0.0\n0.0 0.0 0.0\n0.0 0.0 0.0\n0.0 0.0 0.0\n-1.425 0.0 0.0\n-1.425 -0.798 0.0\n-0.798 -1.425 0.0\n0.0 -1.425 0.0\n-1.5 0.0 0.075\n-1.5 -0.84 0.075\n-0.84 -1.5 0.075\n0.0 -1.5 0.075\n-1.5 0.0 0.15\n-1.5 -0.84 0.15\n-0.84 -1.5 0.15\n0.0 -1.5 0.15\n3 3\n0.0 0.0 0.0\n0.0 0.0 0.0\n0.0 0.0 0.0\n0.0 0.0 0.0\n0.0 -1.425 0.0\n0.798 -1.425 0.0\n1.425 -0.798 0.0\n1.425 0.0 0.0\n0.0 -1.5 0.075\n0.84 -1.5 0.075\n1.5 -0.84 0.075\n1.5 0.0 0.075\n0.0 -1.5 0.15\n0.84 -1.5 0.15\n1.5 -0.84 0.15\n1.5 0.0 0.15";
function createTeapot(multiplier, colorful) {
    const lines = teapot.split("\n");
    const numVertices = parseInt(lines[0]);
    var lineIndex = 1;
    for (let i = 0; i < numVertices; i++) {
        const dims = lines[lineIndex++].split(" ");
        const dim1 = parseInt(dims[0]);
        const dim2 = parseInt(dims[1]);
        const points = [];
        for (let x = 0; x <= dim1; x++) {
            for (let y = 0; y <= dim2; y++) {
                const coords = lines[lineIndex++].split(" ");
                const point = new Vector3(parseFloat(coords[0]), parseFloat(coords[2]), parseFloat(coords[1]));
                point.multiplyScalar(multiplier);
                points.push(point);
            }
        }
        const color = colorful ? getColorFromPalette(i) : 0x7f8c8d;
        const patch = new BezierPatchObject(`Teapot ${i + 1}`, points, dim1 + 1, dim2 + 1, new Color(color));
        App.getObjectManager().addObject(patch);
    }
}

export { createTeapot, getBackgroundColor, getColorFromPalette, getDarkBackgroundColor, getEditHandleColor, getHighlightColor, getIcon, getModeBackgroundColor, getNewPosition, getOrthographicCameraPosition, getPerspectiveCameraPosition, getSelectedColor, teapot };
